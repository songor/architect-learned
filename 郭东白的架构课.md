# 郭东白的架构课

### 开篇词｜没有战略意图，就成不了一个顶尖的架构师

所谓战略意图，就是拥有与其资源和能力极不相称的雄心壮志。

该怎么培养自己作为架构师的战略意图呢？

靠记忆和技能学习，是成不了一个好架构师的。真正的架构师成长，主要靠思考力的提升。

### 01｜模块导学：是什么在影响架构活动的成败？

**影响架构活动成败的要素有哪些？**

架构活动就是制定并且交付架构方案的过程。

这个方案需要和企业目标一致，与商业、软件环境相匹配，并且还需要满足各种资源的约束条件。而你作为一个架构师，要在这些方案中找到那个能够最小化资源和成本，最大化商业价值，以及最大化目标用户满意度的方案。最终，你还要组织技术团队交付这个架构设计方案。

<img src="架构活动.webp" alt="架构活动" style="zoom:50%;" />

中间白色部分是架构师的决策领域；黄色部分指架构师的输入和输出部分；蓝色部分指架构师的工作环境。

当我们把架构师的活动归纳总结后，很容易就能清楚到底是什么在影响整个架构活动的成败。我将它们总结归纳为六个要素，分别是：目标、资源、行为、天时、地利以及人和。

**如何利用生存法则，最大化架构师的成长？**

生存法则指的是我们作为架构师在设计架构方案和组织架构活动时必须要尊重的一些原则。如果违背这些原则，那么作为一个架构师的生存就会受到威胁。

第一条，架构师必须保障整个架构活动有且仅有一个正确的目标。

第二条，架构活动需要尊重和顺应人性。架构活动既要服务用户，也要组织研发人员协同工作。这就意味着架构师必须洞察研发人员和目标用户的人性。从人性角度出发来做决策，才能保障最终面向用户的方案具有长期正确性，以及面向研发同学的实施过程具有可行性。

第三条，架构师永远需要在有限资源下最大化商业价值。

第四条，架构选型必须要考虑到所依赖的商业和技术模块的生命周期。也就是说，架构师要看准技术趋势，一般情况下，要选择已经有规模优势或者是即将有规模优势的技术，而不是选择那些接近衰老期的技术。

第五条，架构师需要在架构活动中不断干预活动的目标和内容，以同时保证整个架构活动可以为企业注入外部适应性。

第六条，架构师需要在一个相对安全的文化环境中探索未知, 只有这样，才有希望找到正确的架构方案。文化环境是架构师最难影响的，因而架构师要有足够的判断力，认清自己所在的文化环境是否有利于探索正确的架构方案，不要在一个错误的环境中浪费自己的宝贵生命。

### 02｜法则一：为什么有些架构活动会没有正确的目标？

所有的架构规划必须有且只有一个正确的目标，而且它必须与公司的战略意图相匹配，这是你架构设计的起点。否则，系统就会变得复杂和无序，缺少结构性。

**架构活动为什么需要目标？**

事实上，在一个企业里，技术先进性很少会是一个架构活动的正确目标，所以很多人做架构升级都只是为了做而做。

如果在初期就有一个明确的目标，那么做到最后，子模块和初期目标就会是大致对齐的，同时也会最大化对目标的贡献。

**目标缺失的两大根因**

**技术上：目标缺少全局视角**

由于技术原因导致的目标缺失往往有个非常积极正面的出发点：那就是**技术同学对于先进技术的强烈好奇心**。

探索新技术是一种积极正面的力量，我非常鼓励团队中的同学去这么做。

从探索新技术变成漫无目的的架构尝试，中间缺失的就是全局思维：**架构师没有从全局视角去思考架构活动的回报，以及它对企业整体复杂性的影响**。

技术尝试跟业务和产品尝试一样，每一次尝试都是在耗费企业的机会成本。如果是一个正处于创新期和成长期的企业，那么每次尝试还会耗费相关同学的心力。心力是一个极其有限且宝贵的资源，一旦尝试失败，耗尽心力的同学很有可能会选择离开，加剧整个企业心力的损失。

除此之外，每次尝试都会给原有系统注入新的复杂性，从而导致整个系统的复杂和无序，这就是墒增的过程。

**开发者的个人利益**。开发者的个人喜好、技术能力，甚至与其他开发者的关系，也会影响到是否会引入一个新系统。

在技术层面上，还有另外一个常见的原因，就是**信息沟通不畅**。因为层级低的技术同学很少做跨团队跨部门沟通，一些小范围的架构改造也找不到一个官方版本可以借用，而且从头开始的时候，总觉得别人的设计太复杂，有过度设计的嫌疑，所以都是自己去新写一个版本。而一旦业务逐渐增长，小工具长成了大工具，就变成了一个新的变种。

一方面，做业务和做产品的同学要有正确的取舍，不能见什么功能就要什么功能。另一方面，做技术的同学也不要动不动就认为别人的东西过度设计了，认为我的场景简单，就应该定制自己的技术。往往你的场景简单，仅仅是因为你的业务还没做起来。等业务做大之后，会发现根本不是你想象得那么简单。

**业务上：目标太多、不明确**

在这种大量 A/B 测试的背景下，业务逻辑层层累积，系统变得越来越臃肿，老代码谁都不敢删。

有的 CEO 喜欢高举高打，上任之后先大搞运动。

一个公司有两个明确的目标，这有点像华山派的剑宗和气宗之争。
